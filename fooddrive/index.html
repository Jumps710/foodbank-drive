<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
    <title>ãƒ•ãƒ¼ãƒ‰ãƒ‰ãƒ©ã‚¤ãƒ–å…¥åº«</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <img id="logo" src="https://raw.githubusercontent.com/jumps710/foodbank-drive/main/rgb_02_fs(2).jpg" alt="ãƒ­ã‚´">
        <h1>ãƒ•ãƒ¼ãƒ‰ãƒ‰ãƒ©ã‚¤ãƒ–å…¥åº«</h1>
        <form id="foodDriveForm" method="POST" enctype="multipart/form-data">
            <div class="form-group">
                <label>Tweet:</label>
                <div class="radio-group">
                    <input type="radio" id="tweetYes" name="tweet" value="true" required>
                    <label for="tweetYes">ã™ã‚‹</label>
                    <input type="radio" id="tweetNo" name="tweet" value="false" required>
                    <label for="tweetNo">ã—ãªã„</label>
                </div>
            </div>

            <div class="form-group">
                <label for="donator">å¯„ä»˜è€…:</label>
                <select id="donator" name="donator" required>
                    <option value="" disabled selected>é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="å€‹äººã®çš†">å€‹äººã®çš†</option>
                    <option value="ã‚³ãƒ¼ãƒ—ã¿ã‚‰ã„">ã‚³ãƒ¼ãƒ—ã¿ã‚‰ã„</option>
                    <option value="ã‚³ãƒ¼ãƒ—å¸‚å·åº—">ã‚³ãƒ¼ãƒ—å¸‚å·åº—</option>
                ã€€ã€€ <option value="ã‚³ãƒ¼ãƒ—ãƒ‡ãƒªæ¹¾å²¸ã‚»ãƒ³ã‚¿ãƒ¼">ã‚³ãƒ¼ãƒ—ãƒ‡ãƒªæ¹¾å²¸ã‚»ãƒ³ã‚¿ãƒ¼</option>
                    <option value="ã‚·ãƒ£ãƒãƒ¼ã‚€ã™ã¶ã°">ã‚·ãƒ£ãƒãƒ¼ã‚€ã™ã¶ã°</option>
                    <option value="KeiyoGAS Community Terraceï¼ˆã¦ã‚‰ã™ï¼‰">KeiyoGAS Community Terraceï¼ˆã¦ã‚‰ã™ï¼‰</option>
                    <option value="ã„ã¡ã‹ã‚ç¤¾å”">ã„ã¡ã‹ã‚ç¤¾å”</option>
                    <option value="ãã®ä»–">ãã®ä»–</option>
                </select>
            </div>
            
            <div class="form-group" id="otherDonatorField" style="display:none;">
                <label for="otherDonator">ä¼æ¥­/å›£ä½“å:</label>
                <input type="text" id="otherDonator" name="otherDonator" placeholder="ä¼æ¥­/å›£ä½“åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">
            </div>

            <div class="form-group">
                <label for="weight">é‡é‡ (kg):</label>
                <input type="text" id="weight" name="weight" inputmode="numeric"ã€€required placeholder="ä¾‹: 0.1">
            </div>

            <div class="form-group">
                <label for="contents">å¯„ä»˜å†…å®¹:</label>
                <input type="text" id="contents" name="contents" required placeholder="ä¾‹: ç¼¶è©°ã€ãƒ¬ãƒˆãƒ«ãƒˆã€ãŠç±³10ã‚­ãƒ­ãªã©">
            </div>

            <div class="form-group">
                <label for="memo">ãƒ¡ãƒ¢:</label>
                <input type="text" id="memo" name="memo" placeholder="è£œè¶³äº‹é …ãŒã‚ã‚Œã°å…¥åŠ›ã—ã¦ãã ã•ã„">
            </div>

            <div class="form-group">
                <label for="photo">å†™çœŸ:</label>
                <div class="file-group">
                    <label for="photo" class="custom-file-label">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</label>
                    <input type="file" id="photo" name="photo" accept="image/jpeg, image/png, image/heic" style="display: none;">
                    <span class="file-name" id="fileName">é¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“</span>
                </div>
                <div id="photoPreview"></div>
            </div>

            <div class="button-group">
                <button type="submit" id="submitBtn">é€ä¿¡</button>
                <button type="reset" id="resetBtn">ã‚„ã‚Šç›´ã—</button>
            </div>
        </form>
    </div>

    <div id="reviewModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>å…¥åŠ›å†…å®¹ã®ç¢ºèª</h2>
            <div id="modalSummary"></div>
            <button id="confirmSubmit">é€ä¿¡</button>
        </div>
    </div>

    <!-- VConsole for debugging (only when debug=true) -->
    <script>
        // ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã®ã¿VConsoleã‚’èª­ã¿è¾¼ã¿
        if (window.location.search.includes('debug=true')) {
            const vConsoleScript = document.createElement('script');
            vConsoleScript.src = 'https://unpkg.com/vconsole@3.15.1/dist/vconsole.min.js';
            vConsoleScript.onload = function() {
                try {
                    window.vConsole = new window.VConsole();
                    console.log('âœ… VConsole initialized for debug mode');
                } catch (e) {
                    console.error('âŒ VConsoleåˆæœŸåŒ–å¤±æ•—:', e);
                }
            };
            document.head.appendChild(vConsoleScript);
        }
    </script>
    
    <!-- è¤‡æ•°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®WOFF SDKã‚’è©¦ã™ -->
    <script>
        console.log('ğŸ”„ WOFF SDK èª­ã¿è¾¼ã¿é–‹å§‹');
        
        // SDKã®èª­ã¿è¾¼ã¿çŠ¶æ³ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹é–¢æ•°
        function checkWoffSDK() {
            if (typeof woff !== 'undefined') {
                console.log('âœ… WOFF SDK èª­ã¿è¾¼ã¿æˆåŠŸ');
                return true;
            }
            console.warn('âš ï¸ WOFF SDK èª­ã¿è¾¼ã¿å¤±æ•—');
            return false;
        }
        
        // SDKèª­ã¿è¾¼ã¿å®Œäº†ã®ç›£è¦–
        window.addEventListener('load', function() {
            setTimeout(() => {
                checkWoffSDK();
            }, 1000);
        });
    </script>
    
    <!-- æœ€æ–°ç‰ˆã®WOFF SDK (3.6.2) -->
    <script charset="utf-8" src="https://static.worksmobile.net/static/wm/woff/edge/3.6.2/sdk.js"></script>
    
    <!-- ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ï¼ˆç•°ãªã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰ -->
    <script>
        // 3.6.2ã§å¤±æ•—ã—ãŸå ´åˆã®3.6ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
        setTimeout(() => {
            if (typeof woff === 'undefined') {
                console.warn('âš ï¸ WOFF SDK 3.6.2 èª­ã¿è¾¼ã¿å¤±æ•—ã€3.6ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯');
                const fallbackScript = document.createElement('script');
                fallbackScript.src = 'https://static.worksmobile.net/static/wm/woff/edge/3.6/sdk.js';
                fallbackScript.onload = () => {
                    console.log('âœ… WOFF SDK 3.6 ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯èª­ã¿è¾¼ã¿å®Œäº†');
                    // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯èª­ã¿è¾¼ã¿å¾Œã‚‚åˆæœŸåŒ–ã‚’å†è©¦è¡Œ
                    setTimeout(() => {
                        if (typeof delayedInitialize === 'function') {
                            console.log('ğŸ”„ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å¾Œã®åˆæœŸåŒ–å†è©¦è¡Œ');
                            delayedInitialize();
                        }
                    }, 500);
                };
                fallbackScript.onerror = () => {
                    console.error('âŒ WOFF SDK 3.6 ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚‚å¤±æ•—ã€3.5ã‚’è©¦è¡Œ');
                    // 3.5ã¸ã®æœ€çµ‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
                    const finalFallback = document.createElement('script');
                    finalFallback.src = 'https://static.worksmobile.net/static/wm/woff/edge/3.5/sdk.js';
                    finalFallback.onload = () => console.log('âœ… WOFF SDK 3.5 æœ€çµ‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯èª­ã¿è¾¼ã¿å®Œäº†');
                    finalFallback.onerror = () => console.error('âŒ å…¨ã¦ã®WOFF SDKã®èª­ã¿è¾¼ã¿ã«å¤±æ•—');
                    document.head.appendChild(finalFallback);
                };
                document.head.appendChild(fallbackScript);
            }
        }, 2000);
    </script>
    <script src="script.js"></script>
</body>
</html>
